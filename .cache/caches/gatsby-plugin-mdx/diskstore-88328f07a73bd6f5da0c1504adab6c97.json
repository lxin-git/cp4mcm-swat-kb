{"expireTime":9007200851618520000,"key":"gatsby-plugin-mdx-entire-payload-aed404ff9244d6d53caed8ccbfa841c2-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/Mark/Documents/GitHub/cp4mcm-swat-kb/node_modules/gatsby-theme-carbon/src/templates/Default.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":130,"offset":131},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":133},"end":{"line":5,"column":29,"offset":161},"indent":[]}},{"type":"import","value":"import ArticleDetails from '../../../components/ArticleDetails'","position":{"start":{"line":8,"column":1,"offset":164},"end":{"line":8,"column":64,"offset":227},"indent":[]}},{"type":"jsx","value":"<ArticleDetails name=\"Ryan Hay\" lastUpdated=\"April 2020\" readTimeMinutes=\"3\" />","position":{"start":{"line":10,"column":1,"offset":229},"end":{"line":10,"column":80,"offset":308},"indent":[]}},{"type":"jsx","value":"<AnchorLinks>\n  <AnchorLink>Install Aspera Proxy</AnchorLink>\n  <AnchorLink>Configure the Server for use with Aspera Proxy</AnchorLink>\n  <AnchorLink>Configure Aspera Proxy</AnchorLink>\n  <AnchorLink>Example Proxy Config</AnchorLink>\n</AnchorLinks>","position":{"start":{"line":12,"column":1,"offset":310},"end":{"line":17,"column":15,"offset":558},"indent":[1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Install Aspera Proxy","position":{"start":{"line":19,"column":4,"offset":563},"end":{"line":19,"column":24,"offset":583},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":560},"end":{"line":19,"column":24,"offset":583},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Provision a CentOS 7 machine (Debian is also supported)","position":{"start":{"line":21,"column":4,"offset":588},"end":{"line":21,"column":59,"offset":643},"indent":[]}}],"position":{"start":{"line":21,"column":4,"offset":588},"end":{"line":21,"column":59,"offset":643},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":585},"end":{"line":21,"column":59,"offset":643},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://downloads.asperasoft.com/en/downloads/42","children":[{"type":"text","value":"Download","position":{"start":{"line":22,"column":5,"offset":648},"end":{"line":22,"column":13,"offset":656},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":647},"end":{"line":22,"column":64,"offset":707},"indent":[]}},{"type":"text","value":" Aspera Proxy to the host","position":{"start":{"line":22,"column":64,"offset":707},"end":{"line":22,"column":89,"offset":732},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":647},"end":{"line":22,"column":89,"offset":732},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":644},"end":{"line":22,"column":89,"offset":732},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"As root install Aspera Proxy: ","position":{"start":{"line":23,"column":4,"offset":736},"end":{"line":23,"column":34,"offset":766},"indent":[]}},{"type":"inlineCode","value":"rpm -ivh ibm-aspera-proxy-1.4.4.174906-linux-64.rpm","position":{"start":{"line":23,"column":34,"offset":766},"end":{"line":23,"column":87,"offset":819},"indent":[]}}],"position":{"start":{"line":23,"column":4,"offset":736},"end":{"line":23,"column":87,"offset":819},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":733},"end":{"line":23,"column":87,"offset":819},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":585},"end":{"line":23,"column":87,"offset":819},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configure the Server for use with Aspera Proxy","position":{"start":{"line":25,"column":4,"offset":824},"end":{"line":25,"column":50,"offset":870},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":821},"end":{"line":25,"column":50,"offset":870},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create the user xfer: ","position":{"start":{"line":27,"column":4,"offset":875},"end":{"line":27,"column":26,"offset":897},"indent":[]}},{"type":"inlineCode","value":"adduser xfer","position":{"start":{"line":27,"column":26,"offset":897},"end":{"line":27,"column":40,"offset":911},"indent":[]}}],"position":{"start":{"line":27,"column":4,"offset":875},"end":{"line":27,"column":40,"offset":911},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":872},"end":{"line":27,"column":40,"offset":911},"indent":[]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ‘","position":{"start":{"line":28,"column":4,"offset":915},"end":{"line":28,"column":9,"offset":920},"indent":[]}},{"type":"link","title":null,"url":"./asperaIdDsaPub.md","children":[{"type":"text","value":"aspera_id_dsa.pub","position":{"start":{"line":28,"column":10,"offset":921},"end":{"line":28,"column":27,"offset":938},"indent":[]}}],"position":{"start":{"line":28,"column":9,"offset":920},"end":{"line":28,"column":49,"offset":960},"indent":[]}},{"type":"text","value":"’ to '/home/xfer/.ssh/authorized_keys'","position":{"start":{"line":28,"column":49,"offset":960},"end":{"line":28,"column":87,"offset":998},"indent":[]}}],"position":{"start":{"line":28,"column":4,"offset":915},"end":{"line":28,"column":87,"offset":998},"indent":[]}},{"type":"code","lang":"shell","meta":null,"value":"command=\"/bin/aspshell -t\",no-agent-forwarding,no-port-forwarding,no-X11-forwarding,no-pty ssh-dss AAAAB3NzaC1kc3MAAACBAOQpAcPqbjIjGCOx7Lo+fLjppxlcRGwkfLnin8GpcjJiRU4CQSkqC9PepNM2bKRZbDii84/X4OLVz/YWlhyWVxOmGRZxLyUDuPTXaZQR5xdq9eM88bSLe3m+0HzEvLfeRDd72/38vCHTFxF+5rR3lR8XCikEgBe8kCvcHqtqmzz5AAAAFQC8LMnqrMdxKJQmglVyX/utXHiaaQAAAIA+g+0Q/jLMcbZe1zEJ9dpvi73MTrA/Ph48m3RROfd9S+dCYlPuLQpUJGveDYfY5kxYXXbLSNSrxAG5nayjcId57tbVWYB1s3sXFz5zJX2cTrNRGoBo/K3ZsT6uAzWk/otBRjGAPfEp2/Vkb6QMgMR/pTeieNwpuYDpyTFPoZq+gAAAAIEAobapDv5p2foH+cG5K07sIFD9r0RD7uKJnlqjYAXzFc8U76wXKgu6WXup2ac0Co+RnZp7Hsa9G+E+iJ6poI9pOR08XTdPly4yDULNST4PwlfrbSFT9FVhzkWfpOvAUc8fkQAhZqv/PE6VhFQ8w03Z8GpqXx7b3NvBR+EfIx368Ko= Aspera public access\ncommand=\"/bin/aspshell -t\",no-agent-forwarding,no-port-forwarding,no-X11-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDgVtYAGrv/GSypo1IlauFMjDCawMoRQAvLO71Tc5KwlrAFRXklcTRZ2QXsiDHssh0KTVjmNSy7FXccMlJCXMATyXeR3sjY2Jdck3NWE89KFIaSp/+A6AFYv6rJqpq8axbHmBuQA7GRbOShWt15tZ0axWCP0sRr0291bDr9uWbgkFS0ljr53839AOZ9ebWcNWpAavB9FU5RMPwmYm2hhvhKM7S0qaq30gN3HmrERcNf3MenKXSuTp6hKO00D8ohWS5SJPsjut6O/aV4d66L3VD6PmN+JdxWrzzNWX7syvQd/W7ppfw2Z/Su8xh2nUC09G7ON3j6rlKX4Rk3jYgOM0i1y8VwCPnY2+DdRWyqwOFZlv5tmZVIYkC8UdhRu3hdImnnuDvHDL88g/CaEzuOGYLoMVtRH82gaoQY4n7jyJk4inc4d9i8Jknl6JtOPfc5peHRmHjnSupvuHaAs4aZp0waid/F4UyI0mCfIKe+/VbxyOZn9m4b38XCMoTyfEmjS7s59RhxfK7JEdzJC1lpWD93bZ/J6jzMzDJfJpN4cDISY9p3hLfR1M1tulF44scv56n38XDyzktj6dqa1P/hJOgOWhnsRe8TaiwdEA6EEqHwUEp2sSnLNnk5jfQetni3evzai4Ly58DKY+E31l5M60+CC2dMcHEJvF/5AqJmoPjOzQ== Aspera public access","position":{"start":{"line":30,"column":4,"offset":1003},"end":{"line":33,"column":7,"offset":2562},"indent":[4,4,4]}}],"position":{"start":{"line":28,"column":1,"offset":912},"end":{"line":34,"column":1,"offset":2563},"indent":[1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add 'Port 33001' to '/etc/ssh/sshd_config'","position":{"start":{"line":35,"column":4,"offset":2567},"end":{"line":35,"column":46,"offset":2609},"indent":[]}}],"position":{"start":{"line":35,"column":4,"offset":2567},"end":{"line":35,"column":46,"offset":2609},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2564},"end":{"line":35,"column":46,"offset":2609},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Restart SSHD: ","position":{"start":{"line":36,"column":4,"offset":2613},"end":{"line":36,"column":18,"offset":2627},"indent":[]}},{"type":"inlineCode","value":"systemctl restart sshd","position":{"start":{"line":36,"column":18,"offset":2627},"end":{"line":36,"column":42,"offset":2651},"indent":[]}}],"position":{"start":{"line":36,"column":4,"offset":2613},"end":{"line":36,"column":42,"offset":2651},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2610},"end":{"line":36,"column":42,"offset":2651},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Copy the Aspera Proxy license file to '/opt/aspera/proxy/etc/aspera-license'","position":{"start":{"line":37,"column":4,"offset":2655},"end":{"line":37,"column":80,"offset":2731},"indent":[]}}],"position":{"start":{"line":37,"column":4,"offset":2655},"end":{"line":37,"column":80,"offset":2731},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2652},"end":{"line":37,"column":80,"offset":2731},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Change the xfer users shell to the secure aspshell: ","position":{"start":{"line":38,"column":4,"offset":2735},"end":{"line":38,"column":56,"offset":2787},"indent":[]}},{"type":"inlineCode","value":"chsh -s /bin/aspshell xfer","position":{"start":{"line":38,"column":56,"offset":2787},"end":{"line":38,"column":84,"offset":2815},"indent":[]}}],"position":{"start":{"line":38,"column":4,"offset":2735},"end":{"line":38,"column":84,"offset":2815},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":2732},"end":{"line":38,"column":84,"offset":2815},"indent":[]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create the file '/etc/sudoers.d/aspera_rproxy' with the following content:","position":{"start":{"line":39,"column":4,"offset":2819},"end":{"line":39,"column":78,"offset":2893},"indent":[]}}],"position":{"start":{"line":39,"column":4,"offset":2819},"end":{"line":39,"column":78,"offset":2893},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"Defaults:xfer !requiretty\nDefaults:xfer secure_path = /sbin:/bin:/usr/sbin:/usr/bin\nxfer ALL = NOPASSWD: /sbin/iptables-restore","position":{"start":{"line":41,"column":4,"offset":2898},"end":{"line":45,"column":7,"offset":3049},"indent":[4,4,4,4]}}],"position":{"start":{"line":39,"column":1,"offset":2816},"end":{"line":45,"column":7,"offset":3049},"indent":[1,1,1,1,1,1]}}],"position":{"start":{"line":27,"column":1,"offset":872},"end":{"line":45,"column":7,"offset":3049},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configure Aspera Proxy","position":{"start":{"line":47,"column":4,"offset":3054},"end":{"line":47,"column":26,"offset":3076},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":3051},"end":{"line":47,"column":26,"offset":3076},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enable reverse proxy mode:\n","position":{"start":{"line":49,"column":4,"offset":3081},"end":{"line":50,"column":4,"offset":3111},"indent":[4]}},{"type":"inlineCode","value":"/opt/aspera/proxy/bin/asconfigurator -x \"set_server_data;rproxy_enabled,true\"","position":{"start":{"line":50,"column":4,"offset":3111},"end":{"line":50,"column":83,"offset":3190},"indent":[]}}],"position":{"start":{"line":49,"column":4,"offset":3081},"end":{"line":50,"column":83,"offset":3190},"indent":[4]}}],"position":{"start":{"line":49,"column":1,"offset":3078},"end":{"line":51,"column":1,"offset":3191},"indent":[1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Disbale UDP port reuse:\n","position":{"start":{"line":52,"column":4,"offset":3195},"end":{"line":53,"column":4,"offset":3222},"indent":[4]}},{"type":"inlineCode","value":"./asconfigurator -x \"set_server_data;rproxy_rules_rule_udp_port_reuse,false\"","position":{"start":{"line":53,"column":4,"offset":3222},"end":{"line":53,"column":82,"offset":3300},"indent":[]}}],"position":{"start":{"line":52,"column":4,"offset":3195},"end":{"line":53,"column":82,"offset":3300},"indent":[4]}}],"position":{"start":{"line":52,"column":1,"offset":3192},"end":{"line":54,"column":1,"offset":3301},"indent":[1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Set the reverse proxy rule to route traffic to the TCP proxy of the CP4I cluster:\n","position":{"start":{"line":55,"column":4,"offset":3305},"end":{"line":56,"column":4,"offset":3390},"indent":[4]}},{"type":"inlineCode","value":"./asconfigurator -x \"set_server_data;rproxy_rules_rule_host,{aspera-tcp-proxy-address}:33001\"","position":{"start":{"line":56,"column":4,"offset":3390},"end":{"line":56,"column":99,"offset":3485},"indent":[]}}],"position":{"start":{"line":55,"column":4,"offset":3305},"end":{"line":56,"column":99,"offset":3485},"indent":[4]}}],"position":{"start":{"line":55,"column":1,"offset":3302},"end":{"line":56,"column":99,"offset":3485},"indent":[1]}}],"position":{"start":{"line":49,"column":1,"offset":3078},"end":{"line":56,"column":99,"offset":3485},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Example Proxy Config","position":{"start":{"line":58,"column":4,"offset":3490},"end":{"line":58,"column":24,"offset":3510},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3487},"end":{"line":58,"column":24,"offset":3510},"indent":[]}},{"type":"code","lang":"xml","meta":null,"value":"<?xml version='1.0' encoding='UTF-8'?>\n<CONF version=\"2\">\n    <server>\n        <rproxy>\n            <enabled>true</enabled>\n            <rules>\n                <rule>\n                    <udp_port_reuse>false</udp_port_reuse>\n                    <squash_user>xfer</squash_user>\n                    <keyfile>/opt/aspera/proxy/etc/asperaweb_id_dsa.openssh</keyfile>\n                    <host>{aspera-tcp-proxy-address}:33001</host>\n                    <bind_source_address>{proxy_internal_interface}</bind_source_address>\n                </rule>\n            </rules>\n        </rproxy>\n    </server>\n</CONF>","position":{"start":{"line":60,"column":1,"offset":3512},"end":{"line":78,"column":4,"offset":4127},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":81,"column":1,"offset":4130},"end":{"line":81,"column":31,"offset":4160},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":81,"column":31,"offset":4160}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/Mark/Documents/GitHub/cp4mcm-swat-kb/node_modules/gatsby-theme-carbon/src/templates/Default.js\"\nimport ArticleDetails from '../../../components/ArticleDetails'\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <ArticleDetails name=\"Ryan Hay\" lastUpdated=\"April 2020\" readTimeMinutes=\"3\" mdxType=\"ArticleDetails\" />\n    <AnchorLinks mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Install Aspera Proxy</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Configure the Server for use with Aspera Proxy</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Configure Aspera Proxy</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Example Proxy Config</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Install Aspera Proxy`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`Provision a CentOS 7 machine (Debian is also supported)`}</li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"https://downloads.asperasoft.com/en/downloads/42\"\n        }}>{`Download`}</a>{` Aspera Proxy to the host`}</li>\n      <li parentName=\"ol\">{`As root install Aspera Proxy: `}<inlineCode parentName=\"li\">{`rpm -ivh ibm-aspera-proxy-1.4.4.174906-linux-64.rpm`}</inlineCode></li>\n    </ol>\n    <h2>{`Configure the Server for use with Aspera Proxy`}</h2>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create the user xfer: `}<inlineCode parentName=\"p\">{`adduser xfer`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add ‘`}<a parentName=\"p\" {...{\n            \"href\": \"./asperaIdDsaPub.md\"\n          }}>{`aspera_id_dsa.pub`}</a>{`’ to ‘/home/xfer/.ssh/authorized_keys’`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-shell\"\n          }}>{`command=\"/bin/aspshell -t\",no-agent-forwarding,no-port-forwarding,no-X11-forwarding,no-pty ssh-dss AAAAB3NzaC1kc3MAAACBAOQpAcPqbjIjGCOx7Lo+fLjppxlcRGwkfLnin8GpcjJiRU4CQSkqC9PepNM2bKRZbDii84/X4OLVz/YWlhyWVxOmGRZxLyUDuPTXaZQR5xdq9eM88bSLe3m+0HzEvLfeRDd72/38vCHTFxF+5rR3lR8XCikEgBe8kCvcHqtqmzz5AAAAFQC8LMnqrMdxKJQmglVyX/utXHiaaQAAAIA+g+0Q/jLMcbZe1zEJ9dpvi73MTrA/Ph48m3RROfd9S+dCYlPuLQpUJGveDYfY5kxYXXbLSNSrxAG5nayjcId57tbVWYB1s3sXFz5zJX2cTrNRGoBo/K3ZsT6uAzWk/otBRjGAPfEp2/Vkb6QMgMR/pTeieNwpuYDpyTFPoZq+gAAAAIEAobapDv5p2foH+cG5K07sIFD9r0RD7uKJnlqjYAXzFc8U76wXKgu6WXup2ac0Co+RnZp7Hsa9G+E+iJ6poI9pOR08XTdPly4yDULNST4PwlfrbSFT9FVhzkWfpOvAUc8fkQAhZqv/PE6VhFQ8w03Z8GpqXx7b3NvBR+EfIx368Ko= Aspera public access\ncommand=\"/bin/aspshell -t\",no-agent-forwarding,no-port-forwarding,no-X11-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDgVtYAGrv/GSypo1IlauFMjDCawMoRQAvLO71Tc5KwlrAFRXklcTRZ2QXsiDHssh0KTVjmNSy7FXccMlJCXMATyXeR3sjY2Jdck3NWE89KFIaSp/+A6AFYv6rJqpq8axbHmBuQA7GRbOShWt15tZ0axWCP0sRr0291bDr9uWbgkFS0ljr53839AOZ9ebWcNWpAavB9FU5RMPwmYm2hhvhKM7S0qaq30gN3HmrERcNf3MenKXSuTp6hKO00D8ohWS5SJPsjut6O/aV4d66L3VD6PmN+JdxWrzzNWX7syvQd/W7ppfw2Z/Su8xh2nUC09G7ON3j6rlKX4Rk3jYgOM0i1y8VwCPnY2+DdRWyqwOFZlv5tmZVIYkC8UdhRu3hdImnnuDvHDL88g/CaEzuOGYLoMVtRH82gaoQY4n7jyJk4inc4d9i8Jknl6JtOPfc5peHRmHjnSupvuHaAs4aZp0waid/F4UyI0mCfIKe+/VbxyOZn9m4b38XCMoTyfEmjS7s59RhxfK7JEdzJC1lpWD93bZ/J6jzMzDJfJpN4cDISY9p3hLfR1M1tulF44scv56n38XDyzktj6dqa1P/hJOgOWhnsRe8TaiwdEA6EEqHwUEp2sSnLNnk5jfQetni3evzai4Ly58DKY+E31l5M60+CC2dMcHEJvF/5AqJmoPjOzQ== Aspera public access\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add ‘Port 33001’ to ‘/etc/ssh/sshd_config’`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Restart SSHD: `}<inlineCode parentName=\"p\">{`systemctl restart sshd`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Copy the Aspera Proxy license file to ‘/opt/aspera/proxy/etc/aspera-license’`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Change the xfer users shell to the secure aspshell: `}<inlineCode parentName=\"p\">{`chsh -s /bin/aspshell xfer`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create the file ‘/etc/sudoers.d/aspera_rproxy’ with the following content:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-bash\"\n          }}>{`Defaults:xfer !requiretty\nDefaults:xfer secure_path = /sbin:/bin:/usr/sbin:/usr/bin\nxfer ALL = NOPASSWD: /sbin/iptables-restore\n`}</code></pre>\n      </li>\n    </ol>\n    <h2>{`Configure Aspera Proxy`}</h2>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Enable reverse proxy mode:\n`}<inlineCode parentName=\"p\">{`/opt/aspera/proxy/bin/asconfigurator -x \"set_server_data;rproxy_enabled,true\"`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Disbale UDP port reuse:\n`}<inlineCode parentName=\"p\">{`./asconfigurator -x \"set_server_data;rproxy_rules_rule_udp_port_reuse,false\"`}</inlineCode></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Set the reverse proxy rule to route traffic to the TCP proxy of the CP4I cluster:\n`}<inlineCode parentName=\"p\">{`./asconfigurator -x \"set_server_data;rproxy_rules_rule_host,{aspera-tcp-proxy-address}:33001\"`}</inlineCode></p>\n      </li>\n    </ol>\n    <h2>{`Example Proxy Config`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version='1.0' encoding='UTF-8'?>\n<CONF version=\"2\">\n    <server>\n        <rproxy>\n            <enabled>true</enabled>\n            <rules>\n                <rule>\n                    <udp_port_reuse>false</udp_port_reuse>\n                    <squash_user>xfer</squash_user>\n                    <keyfile>/opt/aspera/proxy/etc/asperaweb_id_dsa.openssh</keyfile>\n                    <host>{aspera-tcp-proxy-address}:33001</host>\n                    <bind_source_address>{proxy_internal_interface}</bind_source_address>\n                </rule>\n            </rules>\n        </rproxy>\n    </server>\n</CONF>\n`}</code></pre>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}