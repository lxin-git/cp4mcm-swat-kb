{"version":3,"sources":["webpack:///./src/pages/cp4i-guides/aspera-proxy-cp4i/index.mdx"],"names":["_frontmatter","makeShortcode","name","props","console","warn","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","lastUpdated","readTimeMinutes","isMDXComponent"],"mappings":"sQAOaA,G,UAAe,IAEtBC,EAAgB,SAAAC,GAAI,OAAI,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,2EAC5B,kBAASC,KAGZG,EAAcL,EAAc,eAC5BM,EAAaN,EAAc,cAC3BO,EAAc,CAClBR,gBAEIS,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGT,EACF,8BACD,OAAO,YAACM,EAAD,eAAeD,EAAiBL,EAAhC,CAAuCS,WAAYA,EAAYC,QAAQ,cAC5E,YAAC,IAAD,CAAgBX,KAAK,WAAWY,YAAY,aAAaC,gBAAgB,IAAIF,QAAQ,mBACrF,YAACP,EAAD,CAAaO,QAAQ,eACnB,YAACN,EAAD,CAAYM,QAAQ,cAClB,8CAEF,YAACN,EAAD,CAAYM,QAAQ,cAClB,wEAEF,YAACN,EAAD,CAAYM,QAAQ,cAClB,gDAEF,YAACN,EAAD,CAAYM,QAAQ,cAClB,+CAGJ,8CACA,sBAEE,iBAAQ,CACN,WAAc,MADhB,2DAKA,iBAAQ,CACN,WAAc,MACb,gBAAO,CACN,KAAQ,mDACR,WAAc,MAFf,YAFH,6BASA,iBAAQ,CACN,WAAc,MADhB,iCAGE,yBAAgB,CACd,WAAc,MADhB,yDAKJ,wEACA,sBAEE,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,yBAGE,yBAAgB,CACd,WAAc,KADhB,kBAOJ,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,QAGE,gBAAO,CACL,KAAQ,sBACR,WAAc,KAFhB,qBAHF,0CAUA,kBAAS,CACP,WAAc,MACb,mBAAU,CACT,UAAa,iBACb,WAAc,OAFf,0gDAUL,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,+CAOF,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,iBAGE,yBAAgB,CACd,WAAc,KADhB,4BAOJ,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,iFAOF,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,uDAGE,yBAAgB,CACd,WAAc,KADhB,gCAOJ,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,8EAKA,kBAAS,CACP,WAAc,MACb,mBAAU,CACT,UAAa,gBACb,WAAc,OAFf,0IAWP,gDACA,sBAEE,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,+BAIE,yBAAgB,CACd,WAAc,KADhB,mFAOJ,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,4BAIE,yBAAgB,CACd,WAAc,KADhB,kFAOJ,iBAAQ,CACN,WAAc,MAGd,gBAAO,CACL,WAAc,MADhB,sFAIE,yBAAgB,CACd,WAAc,KADhB,oGAON,8CACA,uBAAK,mBAAU,CACX,UAAa,eACb,WAAc,OAFb,snBAyBTF,EAAWK,gBAAiB","file":"component---src-pages-cp-4-i-guides-aspera-proxy-cp-4-i-index-mdx-b0fbe15ef118add727f3.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/asim/MCM/learning-site/local-test-only-branch/cp4mcm-swat-kb/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nimport ArticleDetails from '../../../components/ArticleDetails';\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <ArticleDetails name=\"Ryan Hay\" lastUpdated=\"April 2020\" readTimeMinutes=\"3\" mdxType=\"ArticleDetails\" />\n    <AnchorLinks mdxType=\"AnchorLinks\">\n      <AnchorLink mdxType=\"AnchorLink\">\n        <p>{`Install Aspera Proxy`}</p>\n      </AnchorLink>\n      <AnchorLink mdxType=\"AnchorLink\">\n        <p>{`Configure the Server for use with Aspera Proxy`}</p>\n      </AnchorLink>\n      <AnchorLink mdxType=\"AnchorLink\">\n        <p>{`Configure Aspera Proxy`}</p>\n      </AnchorLink>\n      <AnchorLink mdxType=\"AnchorLink\">\n        <p>{`Example Proxy Config`}</p>\n      </AnchorLink>\n    </AnchorLinks>\n    <h2>{`Install Aspera Proxy`}</h2>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Provision a CentOS 7 machine (Debian is also supported)`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}><a {...{\n          \"href\": \"https://downloads.asperasoft.com/en/downloads/42\",\n          \"parentName\": \"li\"\n        }}>{`Download`}</a>\n        {` Aspera Proxy to the host`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`As root install Aspera Proxy: `}\n        <inlineCode {...{\n          \"parentName\": \"li\"\n        }}>{`rpm -ivh ibm-aspera-proxy-1.4.4.174906-linux-64.rpm`}</inlineCode></li>\n\n    </ol>\n    <h2>{`Configure the Server for use with Aspera Proxy`}</h2>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Create the user xfer: `}\n          <inlineCode {...{\n            \"parentName\": \"p\"\n          }}>{`adduser xfer`}</inlineCode></p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Add ‘`}\n          <a {...{\n            \"href\": \"./asperaIdDsaPub.md\",\n            \"parentName\": \"p\"\n          }}>{`aspera_id_dsa.pub`}</a>\n          {`’ to ‘/home/xfer/.ssh/authorized_keys’`}</p>\n\n\n        <pre {...{\n          \"parentName\": \"li\"\n        }}><code {...{\n            \"className\": \"language-shell\",\n            \"parentName\": \"pre\"\n          }}>{`command=\"/bin/aspshell -t\",no-agent-forwarding,no-port-forwarding,no-X11-forwarding,no-pty ssh-dss AAAAB3NzaC1kc3MAAACBAOQpAcPqbjIjGCOx7Lo+fLjppxlcRGwkfLnin8GpcjJiRU4CQSkqC9PepNM2bKRZbDii84/X4OLVz/YWlhyWVxOmGRZxLyUDuPTXaZQR5xdq9eM88bSLe3m+0HzEvLfeRDd72/38vCHTFxF+5rR3lR8XCikEgBe8kCvcHqtqmzz5AAAAFQC8LMnqrMdxKJQmglVyX/utXHiaaQAAAIA+g+0Q/jLMcbZe1zEJ9dpvi73MTrA/Ph48m3RROfd9S+dCYlPuLQpUJGveDYfY5kxYXXbLSNSrxAG5nayjcId57tbVWYB1s3sXFz5zJX2cTrNRGoBo/K3ZsT6uAzWk/otBRjGAPfEp2/Vkb6QMgMR/pTeieNwpuYDpyTFPoZq+gAAAAIEAobapDv5p2foH+cG5K07sIFD9r0RD7uKJnlqjYAXzFc8U76wXKgu6WXup2ac0Co+RnZp7Hsa9G+E+iJ6poI9pOR08XTdPly4yDULNST4PwlfrbSFT9FVhzkWfpOvAUc8fkQAhZqv/PE6VhFQ8w03Z8GpqXx7b3NvBR+EfIx368Ko= Aspera public access\ncommand=\"/bin/aspshell -t\",no-agent-forwarding,no-port-forwarding,no-X11-forwarding,no-pty ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDgVtYAGrv/GSypo1IlauFMjDCawMoRQAvLO71Tc5KwlrAFRXklcTRZ2QXsiDHssh0KTVjmNSy7FXccMlJCXMATyXeR3sjY2Jdck3NWE89KFIaSp/+A6AFYv6rJqpq8axbHmBuQA7GRbOShWt15tZ0axWCP0sRr0291bDr9uWbgkFS0ljr53839AOZ9ebWcNWpAavB9FU5RMPwmYm2hhvhKM7S0qaq30gN3HmrERcNf3MenKXSuTp6hKO00D8ohWS5SJPsjut6O/aV4d66L3VD6PmN+JdxWrzzNWX7syvQd/W7ppfw2Z/Su8xh2nUC09G7ON3j6rlKX4Rk3jYgOM0i1y8VwCPnY2+DdRWyqwOFZlv5tmZVIYkC8UdhRu3hdImnnuDvHDL88g/CaEzuOGYLoMVtRH82gaoQY4n7jyJk4inc4d9i8Jknl6JtOPfc5peHRmHjnSupvuHaAs4aZp0waid/F4UyI0mCfIKe+/VbxyOZn9m4b38XCMoTyfEmjS7s59RhxfK7JEdzJC1lpWD93bZ/J6jzMzDJfJpN4cDISY9p3hLfR1M1tulF44scv56n38XDyzktj6dqa1P/hJOgOWhnsRe8TaiwdEA6EEqHwUEp2sSnLNnk5jfQetni3evzai4Ly58DKY+E31l5M60+CC2dMcHEJvF/5AqJmoPjOzQ== Aspera public access\n`}</code></pre>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Add ‘Port 33001’ to ‘/etc/ssh/sshd_config’`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Restart SSHD: `}\n          <inlineCode {...{\n            \"parentName\": \"p\"\n          }}>{`systemctl restart sshd`}</inlineCode></p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Copy the Aspera Proxy license file to ‘/opt/aspera/proxy/etc/aspera-license’`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Change the xfer users shell to the secure aspshell: `}\n          <inlineCode {...{\n            \"parentName\": \"p\"\n          }}>{`chsh -s /bin/aspshell xfer`}</inlineCode></p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Create the file ‘/etc/sudoers.d/aspera_rproxy’ with the following content:`}</p>\n\n\n        <pre {...{\n          \"parentName\": \"li\"\n        }}><code {...{\n            \"className\": \"language-bash\",\n            \"parentName\": \"pre\"\n          }}>{`Defaults:xfer !requiretty\nDefaults:xfer secure_path = /sbin:/bin:/usr/sbin:/usr/bin\nxfer ALL = NOPASSWD: /sbin/iptables-restore\n`}</code></pre>\n\n      </li>\n\n    </ol>\n    <h2>{`Configure Aspera Proxy`}</h2>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Enable reverse proxy mode:\n`}\n          <inlineCode {...{\n            \"parentName\": \"p\"\n          }}>{`/opt/aspera/proxy/bin/asconfigurator -x \"set_server_data;rproxy_enabled,true\"`}</inlineCode></p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Disbale UDP port reuse:\n`}\n          <inlineCode {...{\n            \"parentName\": \"p\"\n          }}>{`./asconfigurator -x \"set_server_data;rproxy_rules_rule_udp_port_reuse,false\"`}</inlineCode></p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Set the reverse proxy rule to route traffic to the TCP proxy of the CP4I cluster:\n`}\n          <inlineCode {...{\n            \"parentName\": \"p\"\n          }}>{`./asconfigurator -x \"set_server_data;rproxy_rules_rule_host,{aspera-tcp-proxy-address}:33001\"`}</inlineCode></p>\n\n      </li>\n\n    </ol>\n    <h2>{`Example Proxy Config`}</h2>\n    <pre><code {...{\n        \"className\": \"language-xml\",\n        \"parentName\": \"pre\"\n      }}>{`<?xml version='1.0' encoding='UTF-8'?>\n<CONF version=\"2\">\n    <server>\n        <rproxy>\n            <enabled>true</enabled>\n            <rules>\n                <rule>\n                    <udp_port_reuse>false</udp_port_reuse>\n                    <squash_user>xfer</squash_user>\n                    <keyfile>/opt/aspera/proxy/etc/asperaweb_id_dsa.openssh</keyfile>\n                    <host>{aspera-tcp-proxy-address}:33001</host>\n                    <bind_source_address>{proxy_internal_interface}</bind_source_address>\n                </rule>\n            </rules>\n        </rproxy>\n    </server>\n</CONF>\n`}</code></pre>\n\n  </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}