(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{Mcpz:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return l})),a.d(t,"default",(function(){return p}));var n=a("wx14"),b=a("zLVn"),o=(a("q1tI"),a("7ljp")),i=a("013z"),r=a("dj4F"),l=(a("qKvR"),{}),c={_frontmatter:l},s=i.a;function p(e){var t=e.components,a=Object(b.a)(e,["components"]);return Object(o.b)(s,Object(n.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)(r.a,{name:"Mark Leftwich",lastUpdated:"Aug 8th",readTimeMinutes:"10",mdxType:"ArticleDetails"}),Object(o.b)("h2",null,"Overview"),Object(o.b)("p",null,"The goal is to be able to pull information on which situations have fired (event raised), been acknowledged, or closed from across the entire monitoring infrastructure straight from the HUB TEMS itself.  There are many reasons why you would use this method, here are a few:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"You can sanity check the events you see in your TEPS GUI are the same as what the ITM infrastructure sees")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"You can make sure all RTEMS are sending events, as you can see the TEMS (throughnode).")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"You can also check if acknowledgements are being received by the TEMS (that were sent from Omnibus or TEC)")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"You can fire test events from an agent and track it through the RTEMS, to the HUB and check it appears in the TEP GUI (situation events console)  "))),Object(o.b)("h2",null,"Understanding the process"),Object(o.b)("p",null,"Today we will be using the KDSTSNS tool with some SQL to query the situation status table on the HUB TEMS, specifically the ISITSTSH table. As in the first blog of the series explained how to query the TEMS, the below information explains how to interpret the output of the SQL, so you can utilise the information for you own means. I will start by breaking down what each column means in the table we are querying and they go through a basic example of how the TEMS processes events. This will give you the basics to go away and try it for yourself!"),Object(o.b)("p",null,"Each of the rows in the below table represents is a column in the ISITSTSH table on the TEMS and its meaning. You will need to query this table on the TEMS using SQL provided to retrieve the required data."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Name of Column"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Information held in that column"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"DELTASTAT"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Delta stat is a single letter that represents the status  of that row (full table below)")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"GBLTMSTMP"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Time that the record was written")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"NODE"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"This will be an endpoint name associated with that record")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ORIGINNODE"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Name of the TEMS the agent directly reports  to (also known as throughnode)")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"SITNAME"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Situation name that created the event")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"FULLNAME"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Situation full name if it has been given one (6.21 and beyond)")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"TYPE"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"If the situation is sampled = 0 and Pure =1")))),Object(o.b)("p",null,"The key to understanding the output is the Deltastat column, it will have a single letter in it and this shows you the status of that event/situation."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"DELTASTAT Column Value"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Meaning of the letter"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Y - Event raised"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Event has been Raised from the  situation named on that record line")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"A - Event Acknowledged"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Event has been Acknowledged from the  situation named on that record line")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"N - Event Reset/Closed"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Event has been rest/closed (the event is no longer true)")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"E - Acknowledgement retracted"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Acknowledgement of the event has been retracted (very rare to see)")))),Object(o.b)("p",null,"Now you know how to read the data, you need to understand the processing of the TEMS"),Object(o.b)("h2",null,"Example scenario:"),Object(o.b)("p",null,"1)       Condition is met on an agents and an event is fired. A “Y” record appears in the DELTASTAT column to show the event as raised"),Object(o.b)("p",null,"2)       An operator will then acknowledge the event. This will place a second row in the table with an “A” next to it."),Object(o.b)("p",null,"From the output below, you can see an event has been raised “Y” and that it has been acknowledge “A” for the same endpoint. The agent name, throughnode (TEMS agent reports directly to) and the situation name all have the same value. As these values are all the same, you can tell the raised “Y” and acknowledge “A” event came from the same agent which was connected to the same TEMS (HUB_CANTONA)."),Object(o.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(o.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"26.041666666666668%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA9ElEQVQY041P206EMBDln/0Bn8w++Og3bPYzjCaGGHlgSVChlW4o5aKbLEWgtJRxatbN+qSTnMzMmXNmWm8bhqtRKRj6Xqv9Hsb3D3B5alsw8wzGmL+wGFdgZFl240Xx88poDUMttB0GADfDHnDZf2NZlm9xHMcbT7yRK90IaHiuDrKbD207t1LOoxqd6ISjyZ4DOXucT25hkiRrb/f4cI03oFcTfHYdWGt/Xdf4WjSeeve7897VPx5CyK3H8vwiY7sXSsgdEkFRFEHTNFFd11tKaYBXnzCHVVUFZVmmnHOKmlcpJRdCJGmaRoyxe+Ry3/cvvwDW+XkJLikdkgAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(o.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"spufi1",title:"spufi1",src:"/cp4mcm-swat-kb/static/f329cc32245908adbb90e77b8bc04d05/3cbba/spufi1.png",srcSet:["/cp4mcm-swat-kb/static/f329cc32245908adbb90e77b8bc04d05/7fc1e/spufi1.png 288w","/cp4mcm-swat-kb/static/f329cc32245908adbb90e77b8bc04d05/a5df1/spufi1.png 576w","/cp4mcm-swat-kb/static/f329cc32245908adbb90e77b8bc04d05/3cbba/spufi1.png 1152w","/cp4mcm-swat-kb/static/f329cc32245908adbb90e77b8bc04d05/a967d/spufi1.png 1237w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(o.b)("p",null,"If the situation is no longer true (either the condition returns below the threshold set in the situation for a sampled situation, or an operator closed the event for a pure situation), then all rows matching the same criteria for that particular situation are removed and replaced with a “N” reset/closed row. You will never see a “Y” or an “A” row if an “N” row is present, as it clears and resets that situation ready for when the situation fires again."),Object(o.b)("p",null,"When you query your own TEMS tables, use the information above to guide you. You can use it to check which situations/events have been raised, acknowledged or closed.  "),Object(o.b)("h2",null,"How to retrieve the key information"),Object(o.b)("p",null,"For the method of how to retrieve the data and where to put the files. This was covered in post one in the series:   Link - Blog 1 "),Object(o.b)("p",null,"You will need to execute this SQL:"),Object(o.b)("p",null,"SELECT DELTASTAT,",Object(o.b)("br",{parentName:"p"}),"\n","GBLTMSTMP,",Object(o.b)("br",{parentName:"p"}),"\n","NODE,",Object(o.b)("br",{parentName:"p"}),"\n","ORIGINNODE,",Object(o.b)("br",{parentName:"p"}),"\n","SITNAME,",Object(o.b)("br",{parentName:"p"}),"\n","FULLNAME",Object(o.b)("br",{parentName:"p"}),"\n","FROM O4SRV.ISITSTSH;  "),Object(o.b)("h2",null,"Result:"),Object(o.b)("p",null,"Here is an example output from my test system:"),Object(o.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(o.b)("span",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"47.22222222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABUElEQVQoz51Su27CQBC8r883pE+bIkqdPhRUCJmAweZl7POb98vHZuaET6RJwUhr6fZ2Z2b3rHzfl6Io5HK5yPV6fTaMAIPB4E2NRiPZ7XZyu93kWaDXEg6Hw29VloVUVSVlWcpms3FB5Xuxi3/Q8NPtdl9VlqWS57mkaSpaa9nv93I8HqVpmj+ExOFwkO12a2vO57NdE8Vxtg57vd67WiwWMpvNJAgCmUwmjqgle8RyuRTWc6LT6STr9dr24A0Myfv9/pdiUUvI4AXBkXluCYjVamWnaFHXtcznc/ZYhyD8IKFBo4v7pYFTg70aNLkcCE0cxwZj2ns4NDBjsIbm/sqfiortKFR7BHdGF9wXwYdjTZIkbrcQcK7H47GngsDX+Bcj7CKZTqca6imUY6gmyGnP89IwDGM8VAYyDfEcrjT2ppH/wW8XMh9FUdnpdF5+AStXq59LwsEpAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(o.b)("img",Object(n.a)({parentName:"span"},{className:"gatsby-resp-image-image",alt:"spufi2",title:"spufi2",src:"/cp4mcm-swat-kb/static/40a9e7f7797f140d0bafb4e4390ac606/3cbba/spufi2.png",srcSet:["/cp4mcm-swat-kb/static/40a9e7f7797f140d0bafb4e4390ac606/7fc1e/spufi2.png 288w","/cp4mcm-swat-kb/static/40a9e7f7797f140d0bafb4e4390ac606/a5df1/spufi2.png 576w","/cp4mcm-swat-kb/static/40a9e7f7797f140d0bafb4e4390ac606/3cbba/spufi2.png 1152w","/cp4mcm-swat-kb/static/40a9e7f7797f140d0bafb4e4390ac606/08d78/spufi2.png 1213w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(o.b)("h2",null,"What next?"),Object(o.b)("p",null,"You now have the methodology and the SQL to get the data you need. You could perform health check, test events, etc.  You could also open up the resulting file in a spreadsheet editor. A quick text to columns and you can filter away on a single agent, TEMS, situation, DELTASTAT type to really refine masses of information down to concise quality checks."),Object(o.b)("p",null,"Hope this has been of use to you. If you have any questions or you would like me to build a test case to find a specific piece of information, please post below and I will respond to you."),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://ibmintegration.github.io/cp4mcm-swat-kb/"}),Object(o.b)("img",Object(n.a)({parentName:"a"},{src:"/cp4mcm-swat-kb/5f04418d6388576950618f37a74277c4/SWAT_Header.gif",alt:"MCM"})))))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-itm-spufi-1-how-to-retrieve-live-information-spufi-md-224e70282c2e874792cb.js.map