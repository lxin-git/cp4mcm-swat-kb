{"componentChunkName":"component---src-pages-cp-4-i-guides-aspera-quick-install-mvp-server-mdx","path":"/cp4i-guides/aspera-quick-install-mvp/server/","result":{"pageContext":{"frontmatter":{"title":"Server Configuration","hiddenFromSearch":true},"relativePagePath":"/cp4i-guides/aspera-quick-install-mvp/server.mdx","titleType":"page","MdxNode":{"id":"45eacb0f-b209-5d10-9030-d1fa21147f1e","children":[],"parent":"e7689c69-121e-5bea-a51b-cd218d575667","internal":{"content":"---\ntitle: Server Configuration\nhiddenFromSearch: true\n---\n\n1. [Download](https://downloads.asperasoft.com/en/downloads/1) and install Aspera High\n   Speed Transfer Server (HSTS)\n\n   ```bash\n    rpm -Uvh /path_to_installer/${aspera-hsts-version}.rpm --no-deps\n   ```\n\n1. Edit the servers SSHD config to support Aspera's default SSH port 33001\n\n   ```bash\n    # Open the file for editing\n    vi /etc/ssh/sshd_config\n\n    # Add the TCP/33001 SSH port and comment out existing config for TCP/22.\n    #Port 22\n    Port 33001\n   ```\n\n   Restart the SSHD service `systemctl restart sshd`\n\n1. Disable Firewalld.\n\n   Note: If you do not want to disable the Firewall please read about the\n   [required firewall configuration](https://www.ibm.com/support/knowledgecenter/en/SSL85S_3.9.6/hsts_admin_linux/dita/hsts_admin_linux_configuring_the_firewall.html).\n\n   ```bash\n    # Stop FirewallD\n    systemctl stop firewalld\n\n    # Disable FirewallD\n    systemctl disable firewalld\n   ```\n\n1. License HSTS by creating the `aspera-license` file and pasting the license text as the\n   file contents.\n\n   ```bash\n    vi /opt/aspera/etc/aspera-license\n   ```\n\n1. Create a new local user that will be used by the client to authenticate to this server.\n\n   Note: Instructions are available for setting up SSH key based auth in the optional\n   section of this guide.\n\n   ```bash\n    useradd -m -s /bin/aspshell asp1\n    passwd asp1\n   ```\n\n1. Create a directory that will act as the root directory for file transfers initiated by\n   the `asp1` user.\n\n   ```bash\n    # Create the directory\n    mkdir -p /AsperaRootDir/asp1\n\n    # Update permissions on the directory\n    chown asp1:asp1 /AsperaRootDir/asp1\n   ```\n\n1. Create default global transfer settings. These settings will be used when a user has\n   successfully authenticated to the server but specific settings for the session are not\n   present. Navigate to `/opt/aspera/bin` and execute the following:\n\n   ```bash\n    ./asconfigurator -x \"set_node_data;authorization_transfer_in_value,deny\"\n    ./asconfigurator -x \"set_node_data;authorization_transfer_out_value,deny\"\n    ./asconfigurator -x \"set_node_data;token_encryption_key,THIS_IS_THE_TOKEN_KEY\"\n    ./asconfigurator -x \"set_node_data;absolute,/AsperaRootDir\"\n    ./asconfigurator -x \"set_node_data;read_allowed,false;write_allowed,false;dir_allowed,false\"\n\n   ```\n\n1. Create user specific transfer settings for the `asp1` user that the client will use to\n   connect to the server. These settings have a higher priority than the default settings\n   previously configured. Navigate to `/opt/aspera/bin` and execute the following:\n\n   ```bash\n    ./asconfigurator -x \"set_user_data;user_name,asp1;authorization_transfer_in_value,allow\"\n    ./asconfigurator -x \"set_user_data;user_name,asp1;authorization_transfer_out_value,allow\"\n\n    # When the asp1 user logs in their root directory will be this directory\n    ./asconfigurator -x \"set_user_data;user_name,asp1;absolute,/AsperaRootDir/asp1\"\n\n    # Target rates are measured in Kbps. The below sets the target rate to 100Mbps\n    ./asconfigurator -x \"set_user_data;user_name,asp1;transfer_in_bandwidth_flow_target_rate_default,100000\"\n    ./asconfigurator -x \"set_user_data;user_name,asp1;transfer_out_bandwidth_flow_target_rate_default,100000\"\n   ```\n\n   Note: Each of these commands are updating the Aspera XML config file located at\n   `/opt/aspera/etc/aspera.conf`. If you have manually updated any of these settings you\n   check the validity of the file with `/opt/aspera/bin/asuserdata -v`.\n\nThe Server is now ready to receive connections from the Client.\n\nexport default ({children}) => <div className=\"accordion-list\">{children}</div\n>\n","type":"Mdx","contentDigest":"5a97ff7841e97cb1e03f869c68be6695","counter":208,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Server Configuration","hiddenFromSearch":true},"exports":{},"rawBody":"---\ntitle: Server Configuration\nhiddenFromSearch: true\n---\n\n1. [Download](https://downloads.asperasoft.com/en/downloads/1) and install Aspera High\n   Speed Transfer Server (HSTS)\n\n   ```bash\n    rpm -Uvh /path_to_installer/${aspera-hsts-version}.rpm --no-deps\n   ```\n\n1. Edit the servers SSHD config to support Aspera's default SSH port 33001\n\n   ```bash\n    # Open the file for editing\n    vi /etc/ssh/sshd_config\n\n    # Add the TCP/33001 SSH port and comment out existing config for TCP/22.\n    #Port 22\n    Port 33001\n   ```\n\n   Restart the SSHD service `systemctl restart sshd`\n\n1. Disable Firewalld.\n\n   Note: If you do not want to disable the Firewall please read about the\n   [required firewall configuration](https://www.ibm.com/support/knowledgecenter/en/SSL85S_3.9.6/hsts_admin_linux/dita/hsts_admin_linux_configuring_the_firewall.html).\n\n   ```bash\n    # Stop FirewallD\n    systemctl stop firewalld\n\n    # Disable FirewallD\n    systemctl disable firewalld\n   ```\n\n1. License HSTS by creating the `aspera-license` file and pasting the license text as the\n   file contents.\n\n   ```bash\n    vi /opt/aspera/etc/aspera-license\n   ```\n\n1. Create a new local user that will be used by the client to authenticate to this server.\n\n   Note: Instructions are available for setting up SSH key based auth in the optional\n   section of this guide.\n\n   ```bash\n    useradd -m -s /bin/aspshell asp1\n    passwd asp1\n   ```\n\n1. Create a directory that will act as the root directory for file transfers initiated by\n   the `asp1` user.\n\n   ```bash\n    # Create the directory\n    mkdir -p /AsperaRootDir/asp1\n\n    # Update permissions on the directory\n    chown asp1:asp1 /AsperaRootDir/asp1\n   ```\n\n1. Create default global transfer settings. These settings will be used when a user has\n   successfully authenticated to the server but specific settings for the session are not\n   present. Navigate to `/opt/aspera/bin` and execute the following:\n\n   ```bash\n    ./asconfigurator -x \"set_node_data;authorization_transfer_in_value,deny\"\n    ./asconfigurator -x \"set_node_data;authorization_transfer_out_value,deny\"\n    ./asconfigurator -x \"set_node_data;token_encryption_key,THIS_IS_THE_TOKEN_KEY\"\n    ./asconfigurator -x \"set_node_data;absolute,/AsperaRootDir\"\n    ./asconfigurator -x \"set_node_data;read_allowed,false;write_allowed,false;dir_allowed,false\"\n\n   ```\n\n1. Create user specific transfer settings for the `asp1` user that the client will use to\n   connect to the server. These settings have a higher priority than the default settings\n   previously configured. Navigate to `/opt/aspera/bin` and execute the following:\n\n   ```bash\n    ./asconfigurator -x \"set_user_data;user_name,asp1;authorization_transfer_in_value,allow\"\n    ./asconfigurator -x \"set_user_data;user_name,asp1;authorization_transfer_out_value,allow\"\n\n    # When the asp1 user logs in their root directory will be this directory\n    ./asconfigurator -x \"set_user_data;user_name,asp1;absolute,/AsperaRootDir/asp1\"\n\n    # Target rates are measured in Kbps. The below sets the target rate to 100Mbps\n    ./asconfigurator -x \"set_user_data;user_name,asp1;transfer_in_bandwidth_flow_target_rate_default,100000\"\n    ./asconfigurator -x \"set_user_data;user_name,asp1;transfer_out_bandwidth_flow_target_rate_default,100000\"\n   ```\n\n   Note: Each of these commands are updating the Aspera XML config file located at\n   `/opt/aspera/etc/aspera.conf`. If you have manually updated any of these settings you\n   check the validity of the file with `/opt/aspera/bin/asuserdata -v`.\n\nThe Server is now ready to receive connections from the Client.\n\nexport default ({children}) => <div className=\"accordion-list\">{children}</div\n>\n","fileAbsolutePath":"/Users/Mark/Documents/GitHub/SWAT2020v3/src/pages/cp4i-guides/aspera-quick-install-mvp/server.mdx"}}}}